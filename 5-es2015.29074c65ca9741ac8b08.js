(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"kj/R":function(e,t,o){"use strict";o.r(t),o.d(t,"UserRegistrationModule",(function(){return O}));var r=o("ofXK"),n=o("3Pt+"),i=o("tyNb");const a=["anc@abc.com","xyz@123.com","abc@abc.com","123@abc.com","abc@xyz.com"];var c=o("fXoL"),l=o("1kSV");let b=(()=>{class e{constructor(e){this.modal=e}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(l.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["app-error-modal"]],decls:10,vars:1,consts:[[1,"modal-header"],["id","modal-title",1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(c.Sb(0,"div",0),c.Sb(1,"h4",1),c.Bc(2,"Error"),c.Rb(),c.Rb(),c.Sb(3,"div",2),c.Bc(4),c.Rb(),c.Sb(5,"div",3),c.Sb(6,"button",4),c.ec("click",(function(){return t.modal.dismiss("cancel click")})),c.Bc(7,"Cancel"),c.Rb(),c.Sb(8,"button",5),c.ec("click",(function(){return t.modal.close("Ok click")})),c.Bc(9,"Ok"),c.Rb(),c.Rb()),2&e&&(c.zb(4),c.Dc(" ",t.message,"\n"))},encapsulation:2}),e})();var s=o("1G5W"),d=o("JIr8"),m=o("nYR2"),p=o("eIep"),u=o("XNiG"),f=o("EY2u"),g=o("K/R+");function v(e,t){1&e&&(c.Sb(0,"div"),c.Bc(1," This field is required. "),c.Rb())}function S(e,t){1&e&&(c.Sb(0,"div"),c.Bc(1," First Name and Last Name should be letters only. "),c.Rb())}function h(e,t){1&e&&(c.Sb(0,"div"),c.Bc(1," Phone Number should be a 11 digit numbers. "),c.Rb())}function R(e,t){1&e&&(c.Sb(0,"div"),c.Bc(1," Password must be alphanumeric and at least 8 characters long. "),c.Rb())}function N(e,t){if(1&e&&(c.Qb(0),c.zc(1,S,2,0,"div",2),c.zc(2,h,2,0,"div",2),c.zc(3,R,2,0,"div",2),c.Pb()),2&e){const e=c.gc(2);c.zb(1),c.lc("ngIf","firstName"===e.fieldName||"lastName"===e.fieldName),c.zb(1),c.lc("ngIf","phone"===e.fieldName),c.zb(1),c.lc("ngIf","password"===e.fieldName)}}function z(e,t){1&e&&(c.Sb(0,"div"),c.Bc(1," Enter a valid email. "),c.Rb())}function y(e,t){1&e&&(c.Sb(0,"div"),c.Bc(1," Email does not match. "),c.Rb())}function w(e,t){if(1&e&&(c.Sb(0,"div",1),c.zc(1,v,2,0,"div",2),c.zc(2,N,4,3,"ng-container",2),c.zc(3,z,2,0,"div",2),c.zc(4,y,2,0,"div",2),c.Rb()),2&e){const e=c.gc();c.zb(1),c.lc("ngIf",e.control.errors.required),c.zb(1),c.lc("ngIf",e.control.errors.pattern),c.zb(1),c.lc("ngIf",e.control.errors.email),c.zb(1),c.lc("ngIf",e.control.errors.emailMatch)}}let C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["app-validation-error"]],inputs:{control:"control",fieldName:"fieldName"},decls:1,vars:1,consts:[["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"],[4,"ngIf"]],template:function(e,t){1&e&&c.zc(0,w,5,4,"div",0),2&e&&c.lc("ngIf",t.control.invalid&&(t.control.dirty||t.control.touched))},directives:[r.k],styles:[""]}),e})();function F(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"button",34),c.ec("click",(function(){c.tc(e);const o=t.$implicit;return c.gc().onTitleChange(o)})),c.Bc(2),c.Rb(),c.Pb()}if(2&e){const e=t.$implicit;c.zb(2),c.Cc(e.name)}}function k(e,t){1&e&&c.Ob(0)}function B(e,t){1&e&&c.Bc(0," Submit ")}function I(e,t){1&e&&(c.Nb(0,"span",35),c.Bc(1," Loading.. "))}const _=[{path:"",component:(()=>{class e{constructor(e,t,o,r){this.fb=e,this.modalService=t,this.userService=o,this.router=r,this.titleData=[{id:1,name:"Mr"},{id:2,name:"Mrs"},{id:3,name:"Prof"}],this.isSpinner=!1,this.isAlive$=new u.a,this.onTitleChange=e=>this.signupForm.get("title").setValue(e.name),this.getFormControl=e=>this.signupForm.get(e),this.onDropdownToggle=()=>{this.getFormControl("title").markAsTouched(),this.getFormControl("title").markAsDirty()},this.onSubmit=()=>{const{email:e}=this.signupForm.value;a.includes(e)?this.displayModal("Email exists."):(this.isSpinner=!0,this.userService.regiterUser(this.signupForm.value).pipe(Object(s.a)(this.isAlive$),Object(d.a)(()=>(this.displayModal("User registration failed."),f.a)),Object(m.a)(()=>this.isSpinner=!1),Object(p.a)(e=>this.userService.login(e).pipe(Object(d.a)(()=>{const{id:e,email:t}=this.userService.user.getValue();return this.displayModal(`The user with ID ${e} and email ${t} cannot be logged in`),f.a})))).subscribe(()=>this.router.navigate(["/usersummary"])))}}ngOnInit(){this.initializeForm()}ngOnDestroy(){this.isAlive$.next(),this.isAlive$.complete()}initializeForm(){this.signupForm=this.fb.group({title:["",[n.m.required]],firstName:["",[n.m.required,n.m.pattern("^[a-zA-Z ]*$")]],lastName:["",[n.m.required,n.m.pattern("^[a-zA-Z ]*$")]],email:["",[n.m.required,n.m.email]],confirmEmail:["",[n.m.required,e=>e.parent&&e.parent.get("email").value&&e.value&&e.parent.get("email").value!==e.value?{emailMatch:!0}:null]],dob:[null,[n.m.required]],phone:["",[n.m.required,,n.m.pattern("[0-9 ]{10}")]],password:["",[n.m.required,n.m.pattern("(?!^[0-9]*$)(?!^[a-zA-Z]*$)^([a-zA-Z0-9]{8,})")]]})}displayModal(e){this.modalService.open(b).componentInstance.message=e}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(n.b),c.Mb(l.g),c.Mb(g.a),c.Mb(i.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["app-user-registration"]],decls:83,vars:15,consts:[[1,"container","mt-4","user-registration","p-4"],[3,"formGroup"],[2,"text-align","center"],[1,"text","text-danger"],[1,"row","mb-4"],[1,"col-4"],["ngbDropdown","",1,"user-registration__dropdown"],["id","dropdownBasic1","ngbDropdownToggle","",1,"btn","user-registration__dropdown__label",3,"click"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],[4,"ngFor","ngForOf"],[3,"control"],[1,"col-1","user-registration__required"],[1,"form-row"],[1,"col-5"],[1,"form-group"],["type","text","placeholder","First Name","formControlName","firstName",1,"form-control"],["fieldName","firstName",3,"control"],[1,"controls"],["type","text","placeholder","Last Name","formControlName","lastName",1,"form-control"],["fieldName","lastName",3,"control"],["type","email","placeholder","Email","formControlName","email",1,"form-control"],["type","email","placeholder","Confirm Email","formControlName","confirmEmail",1,"form-control"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["type","date","placeholder","dd/mm/yyyy","formControlName","dob",1,"form-control"],["type","number","placeholder","Phone Number","formControlName","phone",1,"form-control"],["fieldName","phone",3,"control"],["type","password","placeholder","Password","formControlName","password",1,"form-control"],["fieldName","password",3,"control"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[4,"ngIf","ngIfThen","ngIfElse"],["mainTemplate",""],["spinnerTemplate",""],["ngbDropdownItem","",3,"click"],[1,"spinner-border","spinner-border-sm"]],template:function(e,t){if(1&e&&(c.Sb(0,"div",0),c.Sb(1,"form",1),c.Sb(2,"h3",2),c.Bc(3," Sign Up Form "),c.Rb(),c.Sb(4,"p",3),c.Bc(5," Field marked as * are mandatory. "),c.Rb(),c.Sb(6,"div",4),c.Sb(7,"div",5),c.Sb(8,"div",6),c.Sb(9,"div",7),c.ec("click",(function(){return t.onDropdownToggle()})),c.Bc(10),c.Rb(),c.Sb(11,"div",8),c.zc(12,F,3,1,"ng-container",9),c.Rb(),c.Rb(),c.Nb(13,"app-validation-error",10),c.Rb(),c.Sb(14,"div",11),c.Sb(15,"span"),c.Bc(16,"*"),c.Rb(),c.Rb(),c.Rb(),c.Sb(17,"div",12),c.Sb(18,"div",13),c.Sb(19,"div",14),c.Nb(20,"input",15),c.Nb(21,"app-validation-error",16),c.Rb(),c.Rb(),c.Sb(22,"div",11),c.Sb(23,"span"),c.Bc(24,"*"),c.Rb(),c.Rb(),c.Sb(25,"div",13),c.Sb(26,"div",14),c.Sb(27,"div",17),c.Nb(28,"input",18),c.Nb(29,"app-validation-error",19),c.Rb(),c.Rb(),c.Rb(),c.Sb(30,"div",11),c.Sb(31,"span"),c.Bc(32,"*"),c.Rb(),c.Rb(),c.Rb(),c.Sb(33,"div",12),c.Sb(34,"div",13),c.Sb(35,"div",14),c.Nb(36,"input",20),c.Nb(37,"app-validation-error",10),c.Rb(),c.Rb(),c.Sb(38,"div",11),c.Sb(39,"span"),c.Bc(40,"*"),c.Rb(),c.Rb(),c.Sb(41,"div",13),c.Sb(42,"div",14),c.Sb(43,"div",17),c.Nb(44,"input",21),c.Nb(45,"app-validation-error",10),c.Rb(),c.Rb(),c.Rb(),c.Sb(46,"div",11),c.Sb(47,"span"),c.Bc(48,"*"),c.Rb(),c.Rb(),c.Rb(),c.Sb(49,"div",12),c.Sb(50,"div",13),c.Sb(51,"div",22),c.Sb(52,"label",23),c.Bc(53,"Date of birth:"),c.Rb(),c.Sb(54,"div",24),c.Nb(55,"input",25),c.Nb(56,"app-validation-error",10),c.Rb(),c.Rb(),c.Rb(),c.Sb(57,"div",11),c.Sb(58,"span"),c.Bc(59,"*"),c.Rb(),c.Rb(),c.Sb(60,"div",13),c.Sb(61,"div",14),c.Sb(62,"div",17),c.Nb(63,"input",26),c.Nb(64,"app-validation-error",27),c.Rb(),c.Rb(),c.Rb(),c.Sb(65,"div",11),c.Sb(66,"span"),c.Bc(67,"*"),c.Rb(),c.Rb(),c.Rb(),c.Sb(68,"div",12),c.Sb(69,"div",13),c.Sb(70,"div",14),c.Nb(71,"input",28),c.Nb(72,"app-validation-error",29),c.Rb(),c.Rb(),c.Sb(73,"div",11),c.Sb(74,"span"),c.Bc(75,"*"),c.Rb(),c.Rb(),c.Rb(),c.Sb(76,"div",14),c.Sb(77,"button",30),c.ec("click",(function(){return t.onSubmit()})),c.zc(78,k,1,0,"ng-container",31),c.zc(79,B,1,0,"ng-template",null,32,c.Ac),c.zc(81,I,2,0,"ng-template",null,33,c.Ac),c.Rb(),c.Rb(),c.Rb(),c.Rb()),2&e){const e=c.sc(80),o=c.sc(82);c.zb(1),c.lc("formGroup",t.signupForm),c.zb(9),c.Dc(" ",t.signupForm.get("title").value||"Your Title"," "),c.zb(2),c.lc("ngForOf",t.titleData),c.zb(1),c.lc("control",t.getFormControl("title")),c.zb(8),c.lc("control",t.getFormControl("firstName")),c.zb(8),c.lc("control",t.getFormControl("lastName")),c.zb(8),c.lc("control",t.getFormControl("email")),c.zb(8),c.lc("control",t.getFormControl("confirmEmail")),c.zb(11),c.lc("control",t.getFormControl("dob")),c.zb(8),c.lc("control",t.getFormControl("phone")),c.zb(8),c.lc("control",t.getFormControl("password")),c.zb(5),c.lc("disabled",t.signupForm.invalid),c.zb(1),c.lc("ngIf",t.isSpinner)("ngIfThen",o)("ngIfElse",e)}},directives:[n.o,n.i,n.d,l.b,l.f,l.d,r.j,C,n.a,n.h,n.c,n.k,r.k,l.c],styles:[".user-registration[_ngcontent-%COMP%]{background:#fff}.user-registration__dropdown[_ngcontent-%COMP%]{background-color:#f8f8ff}.user-registration__dropdown__label[_ngcontent-%COMP%]{width:100%;text-align:left}.user-registration__required[_ngcontent-%COMP%]{color:red;margin-left:inherit}.form-group[_ngcontent-%COMP%]{margin-bottom:2rem}.form-control[_ngcontent-%COMP%]{background-color:#f8f8ff;border:none}"]}),e})()}];let M=(()=>{class e{}return e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({factory:function(t){return new(t||e)},imports:[[i.c.forChild(_)],i.c]}),e})(),O=(()=>{class e{}return e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({factory:function(t){return new(t||e)},imports:[[r.c,n.l,M,l.e]]}),e})()}}]);
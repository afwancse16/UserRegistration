function _defineProperties(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,n,r){return n&&_defineProperties(e.prototype,n),r&&_defineProperties(e,r),e}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"kj/R":function(e,n,r){"use strict";r.r(n),r.d(n,"UserRegistrationModule",(function(){return E}));var o,t=r("ofXK"),i=r("3Pt+"),a=r("tyNb"),c=["anc@abc.com","xyz@123.com","abc@abc.com","123@abc.com","abc@xyz.com"],l=r("fXoL"),b=r("1kSV"),s=((o=function e(n){_classCallCheck(this,e),this.modal=n}).\u0275fac=function(e){return new(e||o)(l.Mb(b.a))},o.\u0275cmp=l.Gb({type:o,selectors:[["app-error-modal"]],decls:10,vars:1,consts:[[1,"modal-header"],["id","modal-title",1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,n){1&e&&(l.Sb(0,"div",0),l.Sb(1,"h4",1),l.zc(2,"Error"),l.Rb(),l.Rb(),l.Sb(3,"div",2),l.zc(4),l.Rb(),l.Sb(5,"div",3),l.Sb(6,"button",4),l.ec("click",(function(){return n.modal.dismiss("cancel click")})),l.zc(7,"Cancel"),l.Rb(),l.Sb(8,"button",5),l.ec("click",(function(){return n.modal.close("Ok click")})),l.zc(9,"Ok"),l.Rb(),l.Rb()),2&e&&(l.zb(4),l.Bc(" ",n.message,"\n"))},encapsulation:2}),o),d=r("1G5W"),m=r("JIr8"),u=r("nYR2"),p=r("eIep"),f=r("XNiG"),g=r("EY2u"),v=r("K/R+");function S(e,n){1&e&&(l.Sb(0,"div"),l.zc(1," This field is required. "),l.Rb())}function h(e,n){1&e&&(l.Sb(0,"div"),l.zc(1," First Name and Last Name should be letters only. "),l.Rb())}function R(e,n){1&e&&(l.Sb(0,"div"),l.zc(1," Phone Number should be a 11 digit numbers. "),l.Rb())}function z(e,n){1&e&&(l.Sb(0,"div"),l.zc(1," Password must be alphanumeric and at least 8 characters long. "),l.Rb())}function N(e,n){if(1&e&&(l.Qb(0),l.xc(1,h,2,0,"div",2),l.xc(2,R,2,0,"div",2),l.xc(3,z,2,0,"div",2),l.Pb()),2&e){var r=l.gc(2);l.zb(1),l.jc("ngIf","firstName"===r.fieldName||"lastName"===r.fieldName),l.zb(1),l.jc("ngIf","phone"===r.fieldName),l.zb(1),l.jc("ngIf","password"===r.fieldName)}}function y(e,n){1&e&&(l.Sb(0,"div"),l.zc(1," Enter a valid email. "),l.Rb())}function C(e,n){1&e&&(l.Sb(0,"div"),l.zc(1," Email does not match. "),l.Rb())}function w(e,n){if(1&e&&(l.Sb(0,"div",1),l.xc(1,S,2,0,"div",2),l.xc(2,N,4,3,"ng-container",2),l.xc(3,y,2,0,"div",2),l.xc(4,C,2,0,"div",2),l.Rb()),2&e){var r=l.gc();l.zb(1),l.jc("ngIf",r.control.errors.required),l.zb(1),l.jc("ngIf",r.control.errors.pattern),l.zb(1),l.jc("ngIf",r.control.errors.email),l.zb(1),l.jc("ngIf",r.control.errors.emailMatch)}}var k,_=((k=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||k)},k.\u0275cmp=l.Gb({type:k,selectors:[["app-validation-error"]],inputs:{control:"control",fieldName:"fieldName"},decls:1,vars:1,consts:[["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"],[4,"ngIf"]],template:function(e,n){1&e&&l.xc(0,w,5,4,"div",0),2&e&&l.jc("ngIf",n.control.invalid&&(n.control.dirty||n.control.touched))},directives:[t.j],styles:[""]}),k);function j(e,n){if(1&e){var r=l.Tb();l.Qb(0),l.Sb(1,"button",34),l.ec("click",(function(){l.rc(r);var e=n.$implicit;return l.gc().onTitleChange(e)})),l.zc(2),l.Rb(),l.Pb()}if(2&e){var o=n.$implicit;l.zb(2),l.Ac(o.name)}}function F(e,n){1&e&&l.Ob(0)}function x(e,n){1&e&&l.zc(0," Submit ")}function I(e,n){1&e&&(l.Nb(0,"span",35),l.zc(1," Loading.. "))}var M,O,P,T=[{path:"",component:(M=function(){function e(n,r,o){var t=this;_classCallCheck(this,e),this.fb=n,this.modalService=r,this.userService=o,this.titleData=[{id:1,name:"Mr"},{id:2,name:"Mrs"},{id:3,name:"Prof"}],this.isSpinner=!1,this.isAlive$=new f.a,this.onTitleChange=function(e){return t.signupForm.get("title").setValue(e.name)},this.getFormControl=function(e){return t.signupForm.get(e)},this.onDropdownToggle=function(){t.getFormControl("title").markAsTouched(),t.getFormControl("title").markAsDirty()},this.onSubmit=function(){var e=t.signupForm.value.email;c.includes(e)?t.displayModal("Email exists."):(t.isSpinner=!0,t.userService.regiterUser(t.signupForm.value).pipe(Object(d.a)(t.isAlive$),Object(m.a)((function(){return t.displayModal("User registration failed."),g.a})),Object(u.a)((function(){return t.isSpinner=!1})),Object(p.a)((function(){return t.userService.login().pipe(Object(m.a)((function(){var e=t.userService.user.getValue(),n=e.id,r=e.email;return t.displayModal("The user with ID ".concat(n," and email ").concat(r," cannot be logged in")),g.a})))}))).subscribe())}}return _createClass(e,[{key:"ngOnInit",value:function(){this.initializeForm()}},{key:"ngOnDestroy",value:function(){this.isAlive$.next(),this.isAlive$.complete()}},{key:"initializeForm",value:function(){this.signupForm=this.fb.group({title:["",[i.m.required]],firstName:["",[i.m.required,i.m.pattern("^[a-zA-Z ]*$")]],lastName:["",[i.m.required,i.m.pattern("^[a-zA-Z ]*$")]],email:["",[i.m.required,i.m.email]],confirmEmail:["",[i.m.required,function(e){return e.parent&&e.parent.get("email").value&&e.value&&e.parent.get("email").value!==e.value?{emailMatch:!0}:null}]],dob:[null,[i.m.required]],phone:["",[i.m.required,,i.m.pattern("[0-9 ]{10}")]],password:["",[i.m.required,i.m.pattern("[a-zA-Z0-9]{8,}")]]})}},{key:"displayModal",value:function(e){this.modalService.open(s).componentInstance.message=e}}]),e}(),M.\u0275fac=function(e){return new(e||M)(l.Mb(i.b),l.Mb(b.g),l.Mb(v.a))},M.\u0275cmp=l.Gb({type:M,selectors:[["app-user-registration"]],decls:83,vars:15,consts:[[1,"container","mt-4","user-registration","p-4"],[3,"formGroup"],[2,"text-align","center"],[1,"text","text-danger"],[1,"row","mb-4"],[1,"col-4"],["ngbDropdown","",1,"user-registration__dropdown"],["id","dropdownBasic1","ngbDropdownToggle","",1,"btn","user-registration__dropdown__label",3,"click"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],[4,"ngFor","ngForOf"],[3,"control"],[1,"col-1","user-registration__required"],[1,"form-row"],[1,"col-5"],[1,"form-group"],["type","text","placeholder","First Name","formControlName","firstName",1,"form-control"],["fieldName","firstName",3,"control"],[1,"controls"],["type","text","placeholder","Last Name","formControlName","lastName",1,"form-control"],["fieldName","lastName",3,"control"],["type","email","placeholder","Email","formControlName","email",1,"form-control"],["type","email","placeholder","Confirm Email","formControlName","confirmEmail",1,"form-control"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["type","date","placeholder","dd/mm/yyyy","formControlName","dob",1,"form-control"],["type","number","placeholder","Phone Number","formControlName","phone",1,"form-control"],["fieldName","phone",3,"control"],["type","password","placeholder","Password","formControlName","password",1,"form-control"],["fieldName","password",3,"control"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[4,"ngIf","ngIfThen","ngIfElse"],["mainTemplate",""],["spinnerTemplate",""],["ngbDropdownItem","",3,"click"],[1,"spinner-border","spinner-border-sm"]],template:function(e,n){if(1&e&&(l.Sb(0,"div",0),l.Sb(1,"form",1),l.Sb(2,"h3",2),l.zc(3," Sign Up Form "),l.Rb(),l.Sb(4,"p",3),l.zc(5," Field marked as * are mandatory. "),l.Rb(),l.Sb(6,"div",4),l.Sb(7,"div",5),l.Sb(8,"div",6),l.Sb(9,"div",7),l.ec("click",(function(){return n.onDropdownToggle()})),l.zc(10),l.Rb(),l.Sb(11,"div",8),l.xc(12,j,3,1,"ng-container",9),l.Rb(),l.Rb(),l.Nb(13,"app-validation-error",10),l.Rb(),l.Sb(14,"div",11),l.Sb(15,"span"),l.zc(16,"*"),l.Rb(),l.Rb(),l.Rb(),l.Sb(17,"div",12),l.Sb(18,"div",13),l.Sb(19,"div",14),l.Nb(20,"input",15),l.Nb(21,"app-validation-error",16),l.Rb(),l.Rb(),l.Sb(22,"div",11),l.Sb(23,"span"),l.zc(24,"*"),l.Rb(),l.Rb(),l.Sb(25,"div",13),l.Sb(26,"div",14),l.Sb(27,"div",17),l.Nb(28,"input",18),l.Nb(29,"app-validation-error",19),l.Rb(),l.Rb(),l.Rb(),l.Sb(30,"div",11),l.Sb(31,"span"),l.zc(32,"*"),l.Rb(),l.Rb(),l.Rb(),l.Sb(33,"div",12),l.Sb(34,"div",13),l.Sb(35,"div",14),l.Nb(36,"input",20),l.Nb(37,"app-validation-error",10),l.Rb(),l.Rb(),l.Sb(38,"div",11),l.Sb(39,"span"),l.zc(40,"*"),l.Rb(),l.Rb(),l.Sb(41,"div",13),l.Sb(42,"div",14),l.Sb(43,"div",17),l.Nb(44,"input",21),l.Nb(45,"app-validation-error",10),l.Rb(),l.Rb(),l.Rb(),l.Sb(46,"div",11),l.Sb(47,"span"),l.zc(48,"*"),l.Rb(),l.Rb(),l.Rb(),l.Sb(49,"div",12),l.Sb(50,"div",13),l.Sb(51,"div",22),l.Sb(52,"label",23),l.zc(53,"Date of birth:"),l.Rb(),l.Sb(54,"div",24),l.Nb(55,"input",25),l.Nb(56,"app-validation-error",10),l.Rb(),l.Rb(),l.Rb(),l.Sb(57,"div",11),l.Sb(58,"span"),l.zc(59,"*"),l.Rb(),l.Rb(),l.Sb(60,"div",13),l.Sb(61,"div",14),l.Sb(62,"div",17),l.Nb(63,"input",26),l.Nb(64,"app-validation-error",27),l.Rb(),l.Rb(),l.Rb(),l.Sb(65,"div",11),l.Sb(66,"span"),l.zc(67,"*"),l.Rb(),l.Rb(),l.Rb(),l.Sb(68,"div",12),l.Sb(69,"div",13),l.Sb(70,"div",14),l.Nb(71,"input",28),l.Nb(72,"app-validation-error",29),l.Rb(),l.Rb(),l.Sb(73,"div",11),l.Sb(74,"span"),l.zc(75,"*"),l.Rb(),l.Rb(),l.Rb(),l.Sb(76,"div",14),l.Sb(77,"button",30),l.ec("click",(function(){return n.onSubmit()})),l.xc(78,F,1,0,"ng-container",31),l.xc(79,x,1,0,"ng-template",null,32,l.yc),l.xc(81,I,2,0,"ng-template",null,33,l.yc),l.Rb(),l.Rb(),l.Rb(),l.Rb()),2&e){var r=l.qc(80),o=l.qc(82);l.zb(1),l.jc("formGroup",n.signupForm),l.zb(9),l.Bc(" ",n.signupForm.get("title").value||"Your Title"," "),l.zb(2),l.jc("ngForOf",n.titleData),l.zb(1),l.jc("control",n.getFormControl("title")),l.zb(8),l.jc("control",n.getFormControl("firstName")),l.zb(8),l.jc("control",n.getFormControl("lastName")),l.zb(8),l.jc("control",n.getFormControl("email")),l.zb(8),l.jc("control",n.getFormControl("confirmEmail")),l.zb(11),l.jc("control",n.getFormControl("dob")),l.zb(8),l.jc("control",n.getFormControl("phone")),l.zb(8),l.jc("control",n.getFormControl("password")),l.zb(5),l.jc("disabled",n.signupForm.invalid),l.zb(1),l.jc("ngIf",n.isSpinner)("ngIfThen",o)("ngIfElse",r)}},directives:[i.o,i.i,i.d,b.b,b.f,b.d,t.i,_,i.a,i.h,i.c,i.k,t.j,b.c],styles:[".user-registration[_ngcontent-%COMP%]{background:#fff}.user-registration__dropdown[_ngcontent-%COMP%]{background-color:#f8f8ff}.user-registration__dropdown__label[_ngcontent-%COMP%]{width:100%;text-align:left}.user-registration__required[_ngcontent-%COMP%]{color:red;margin-left:inherit}.form-group[_ngcontent-%COMP%]{margin-bottom:2rem}.form-control[_ngcontent-%COMP%]{background-color:#f8f8ff;border:none}"]}),M)}],q=((P=function e(){_classCallCheck(this,e)}).\u0275mod=l.Kb({type:P}),P.\u0275inj=l.Jb({factory:function(e){return new(e||P)},imports:[[a.a.forChild(T)],a.a]}),P),E=((O=function e(){_classCallCheck(this,e)}).\u0275mod=l.Kb({type:O}),O.\u0275inj=l.Jb({factory:function(e){return new(e||O)},imports:[[t.b,i.l,q,b.e]]}),O)}}]);